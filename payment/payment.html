<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Registration</title>
    <link rel="stylesheet" href="styles.css"> <!-- Add your custom CSS here -->
    <link rel="stylesheet" href="payment.css"> <!-- Add your custom payment CSS here -->
    <script src="https://www.gstatic.com/firebasejs/11.2.0/firebase-app.js" type="module"></script>
    <script src="https://www.gstatic.com/firebasejs/11.2.0/firebase-database.js" type="module"></script>
</head>
<body>

    <div class="form-container">
        <h1>Event Registration</h1>

        <!-- Event Categories Section -->
        <div id="tech-fest">
            <h2>Tech Fest</h2>
            <div>
                <h3>Technical Events</h3>
                <input type="checkbox" id="event1" name="tech-events" value="Tech Event 1"> Tech Event 1<br>
                <input type="checkbox" id="event2" name="tech-events" value="Tech Event 2"> Tech Event 2<br>
            </div>
            <div>
                <h3>Mobile Games</h3>
                <input type="checkbox" id="event3" name="mobile-games" value="BGMI"> BGMI<br>
                <input type="checkbox" id="event4" name="mobile-games" value="Clash Royale"> Clash Royale<br>
            </div>
            <div>
                <h3>Common Events</h3>
                <input type="checkbox" id="event5" name="common-events" value="Treasure Hunt"> Treasure Hunt<br>
                <input type="checkbox" id="event6" name="common-events" value="Quiz"> Quiz<br>
            </div>
        </div>

        <!-- Sports Fest Section -->
        <div id="sports-fest">
            <h2>Sports Fest</h2>
            <div>
                <h3>Sports Events</h3>
                <input type="checkbox" id="event7" name="sports-events" value="Cricket"> Cricket<br>
                <input type="checkbox" id="event8" name="sports-events" value="Football"> Football<br>
            </div>
            <div>
                <h3>Mobile Games</h3>
                <input type="checkbox" id="event9" name="mobile-games" value="PUBG"> PUBG<br>
                <input type="checkbox" id="event10" name="mobile-games" value="Free Fire"> Free Fire<br>
            </div>
        </div>

        <!-- Arts Fest Section -->
        <div id="arts-fest">
            <h2>Arts Fest</h2>
            <div>
                <h3>Art Events</h3>
                <input type="checkbox" id="event11" name="arts-events" value="Painting"> Painting<br>
                <input type="checkbox" id="event12" name="arts-events" value="Sculpture"> Sculpture<br>
            </div>
            <div>
                <h3>Creative Events</h3>
                <input type="checkbox" id="event13" name="creative-events" value="Photography"> Photography<br>
                <input type="checkbox" id="event14" name="creative-events" value="Writing"> Writing<br>
            </div>
        </div>

        <!-- Submit Form Section -->
        <button id="submit" onclick="submitForm()">Submit</button>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-app.js";
        import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-database.js";

        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAsFLorQ-M1JJ6NXbFvo49AlPvf4x8glQY",
            authDomain: "celeste-25.firebaseapp.com",
            databaseURL: "https://celeste-25-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "celeste-25",
            storageBucket: "celeste-25.firebasestorage.app",
            messagingSenderId: "798589851177",
            appId: "1:798589851177:web:2ef7f68ce3d557e4446e38"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);

        // Submit Form Function
        function submitForm() {
            // Collecting selected events
            let selectedEvents = [];
            const techEvents = document.querySelectorAll('input[name="tech-events"]:checked');
            const mobileGames = document.querySelectorAll('input[name="mobile-games"]:checked');
            const sportsEvents = document.querySelectorAll('input[name="sports-events"]:checked');
            const artsEvents = document.querySelectorAll('input[name="arts-events"]:checked');
            const creativeEvents = document.querySelectorAll('input[name="creative-events"]:checked');
            const commonEvents = document.querySelectorAll('input[name="common-events"]:checked');

            // Add checked events to the array
            techEvents.forEach(event => selectedEvents.push(event.value));
            mobileGames.forEach(event => selectedEvents.push(event.value));
            sportsEvents.forEach(event => selectedEvents.push(event.value));
            artsEvents.forEach(event => selectedEvents.push(event.value));
            creativeEvents.forEach(event => selectedEvents.push(event.value));
            commonEvents.forEach(event => selectedEvents.push(event.value));

            // Firebase reference
            const userId = "user_123"; // This should be dynamic based on user authentication
            const userRef = ref(database, 'registrations/' + userId);

            // Set data in Firebase
            set(userRef, {
                selectedEvents: selectedEvents
            }).then(() => {
                alert("Registration successful!");
            }).catch((error) => {
                console.error("Error registering: ", error);
            });
        }
    </script>
</body>
</html>
